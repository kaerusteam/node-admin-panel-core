"use strict";

module.exports = function(callback){
	var migration = require("<%=pathToMigrationModule%>");
	migration.ensureCollection([
		//names of table 
		],function(err,res){
		if (err) {
			console.error(err);
			return callback(err);
		} 
		migration.ensureCatalogFields([
			/* Structure of object : 
				table : "%tablename%",
				fields : [{
					field: “%fieldname%”,
					type: "%type%",
					caption: {
						“%local%”: “%caption%”
					},
					isSortable: %booleanValue%,
					isVisible:  %booleanValue%,
					isAdditional:  %booleanValue%,
					isFilterable:  %booleanValue%,
					isSearchable:  %booleanValue%
				}]
			 */
			],function(err,res){
			if (err) {
				console.error(err);
				return callback(err);
			}
			console.log("Migration successfull");
			callback(false);
		});
	});
};

